#############################################################################
# data source definition
#############################################################################
source te {
	type	 = mysql
	sql_host = db
	sql_user = root
	sql_pass = 123
	sql_db	 = te
	sql_port = 3306

	sql_query_pre = SET NAMES utf8
	sql_query_pre = SET @id := 0
	sql_query_pre = SET group_concat_max_len = 16384
	sql_query_post = SET CHARACTER SET utf8
}

source article : te {
	sql_query = \
		SELECT \
			@id := @id + 1, \
            @prc_count := (SELECT COUNT(prc.star) FROM product_reviews_cache prc WHERE prc.sku = c.code), \
            @prc_vote := (SELECT SUM(prc.star) FROM product_reviews_cache prc WHERE prc.sku = c.code), \
            @ac_main := (SELECT COUNT(a2.id) FROM article a2 INNER JOIN interior_articles_head iah ON iah.article_id = a2.id INNER JOIN collection ac ON ac.id = a2.collection WHERE a.collection = ac.id AND a2.delivery != 6), \
            @a_main := (SELECT COUNT(a2.id) FROM article a2 INNER JOIN interior_articles_head iah ON iah.article_id = a2.id WHERE a.id = a2.id AND a2.delivery != 6 AND f.id = iah.interior_id), \
            @i_waf := (SELECT count(ar.id) FROM article ar LEFT JOIN interior_article iar ON ar.id = iar.article_id WHERE f.id = iar.interior_id AND ar.using = 4 AND ar.type = 113), \
            @i_wafn := (SELECT count(ar.id) FROM article ar LEFT JOIN interior_article iar ON ar.id = iar.article_id WHERE f.id = iar.interior_id AND ar.using != 4), \
			@no_fons := (SELECT COUNT(atp.type) FROM article atp INNER JOIN collection ac ON ac.id = atp.collection WHERE a.collection = atp.collection AND atp.type IN (113) AND atp.file IS NOT NULL AND atp.file <> '' AND atp.delivery != 6), \
			@no_decors :=(SELECT COUNT(atp.type) FROM article atp INNER JOIN collection ac ON ac.id = atp.collection WHERE a.collection = atp.collection AND atp.type IN (1,106) AND atp.file IS NOT NULL AND atp.file <> '' AND atp.delivery != 6), \
            @a_head := IF (@a_main > 0 OR @ac_main = 0 OR c.id = 3245628, 1, 0), \
            a.id AS a_id, \
            IF (a.alternate_name IS NOT NULL, a.alternate_name, a.name) AS a_name, \
            asur.surface_id AS surface, \
            a.pr_status, \
            a.using, \
            a.material AS material, \
            a.shape AS shape, \
            a.thin_granite, \
            a.glazed_granite, \
            a.measure, \
            a.balance, \
            a.balance_te, \
            a.type, \
            a.size_x, \
            a.size_y, \
			a.size_big, \
            a.thick, \
            a.edge_type, \
            a.delivery, \
            a.off_shade, \
            a.weight, \
            a.square, \
            a.packaging_count, \
            a.packaging_count_ft, \
            IF (a.price_mq_euro > 10, IF (a.price_mq_euro > 20, IF (a.price_mq_euro > 30, 4, 3), 2), 1) AS a_price_cat, \
            IF (a.price_mq_euro_de > 10, IF (a.price_mq_euro_de > 20, IF (a.price_mq_euro_de > 30, 4, 3), 2), 1) AS a_price_cat_de, \
            IF (a.price_mq_euro_fr > 10, IF (a.price_mq_euro_fr > 20, IF (a.price_mq_euro_fr > 30, 4, 3), 2), 1) AS a_price_cat_fr, \
            IF (a.price_mq_euro_it > 10, IF (a.price_mq_euro_it > 20, IF (a.price_mq_euro_it > 30, 4, 3), 2), 1) AS a_price_cat_it, \
            IF (a.price_fq_usd > 10, IF (a.price_fq_usd > 20, IF (a.price_fq_usd > 30, 4, 3), 2), 1) AS a_price_cat_fq_usd, \
            IF (a.price_fq_use > 10, IF (a.price_fq_use > 20, IF (a.price_fq_use > 30, 4, 3), 2), 1) AS a_price_cat_fq_use, \
            IF (a.price_mq_usd > 15, IF (a.price_mq_usd > 25, IF (a.price_mq_usd > 35, 4, 3), 2), 1) AS a_price_cat_usd, \
            IF (a.price_mq_use > 10, IF (a.price_mq_use > 20, IF (a.price_mq_use > 30, 4, 3), 2), 1) AS a_price_cat_use, \
            IF (a.price_mq_rub > 2000, IF (a.price_mq_rub > 3500, IF (a.price_mq_rub > 6000, 4, 3), 2), 1) AS a_price_cat_rub, \
            IF (a.price_mq_rue > 10, IF (a.price_mq_rue > 20, IF (a.price_mq_rue > 30, 4, 3), 2), 1) AS a_price_cat_rue, \
            IF (a.price_mq_gbp > 10, IF (a.price_mq_gbp > 20, IF (a.price_mq_gbp > 30, 4, 3), 2), 1) AS a_price_cat_gbp, \
            IF (a.price_mq_gbe > 10, IF (a.price_mq_gbe > 20, IF (a.price_mq_gbe > 30, 4, 3), 2), 1) AS a_price_cat_gbe, \
            IF (a.price_mq_chf > 10, IF (a.price_mq_chf > 20, IF (a.price_mq_chf > 30, 4, 3), 2), 1) AS a_price_cat_chf, \
            IF (a.price_mq_che > 10, IF (a.price_mq_che > 20, IF (a.price_mq_che > 30, 4, 3), 2), 1) AS a_price_cat_che, \
            IF (a.price_mq_sek > 100, IF (a.price_mq_sek > 200, IF (a.price_mq_sek > 300, 4, 3), 2), 1) AS a_price_cat_sek, \
            IF (a.price_mq_see > 10, IF (a.price_mq_see > 20, IF (a.price_mq_see > 30, 4, 3), 2), 1) AS a_price_cat_see, \
            IF (a.price_mq_dkk > 100, IF (a.price_mq_dkk > 200, IF (a.price_mq_dkk > 300, 4, 3), 2), 1) AS a_price_cat_dkk, \
            IF (a.price_mq_dke > 10, IF (a.price_mq_dke > 20, IF (a.price_mq_dke > 30, 4, 3), 2), 1) AS a_price_cat_dke, \
            IF (a.price_mq_nok > 100, IF (a.price_mq_nok > 200, IF (a.price_mq_nok > 300, 4, 3), 2), 1) AS a_price_cat_nok, \
            IF (a.price_mq_noe > 10, IF (a.price_mq_noe > 20, IF (a.price_mq_noe > 30, 4, 3), 2), 1) AS a_price_cat_noe, \
            IF (a.price_mq_pln > 40, IF (a.price_mq_pln > 80, IF (a.price_mq_pln > 120, 4, 3), 2), 1) AS a_price_cat_pln, \
            IF (a.price_mq_ple > 10, IF (a.price_mq_ple > 20, IF (a.price_mq_ple > 30, 4, 3), 2), 1) AS a_price_cat_ple, \
            IF (a.price_mq_cad > 15, IF (a.price_mq_cad > 25, IF (a.price_mq_cad > 35, 4, 3), 2), 1) AS a_price_cat_cad, \
            IF (a.price_mq_cae > 10, IF (a.price_mq_cae > 20, IF (a.price_mq_cae > 30, 4, 3), 2), 1) AS a_price_cat_cae, \
            IF (a.price_fq_cad > 10, IF (a.price_mq_cad > 20, IF (a.price_mq_cad > 30, 4, 3), 2), 1) AS a_price_cat_fq_cad, \
            IF (a.price_fq_cae > 10, IF (a.price_mq_cae > 20, IF (a.price_mq_cae > 30, 4, 3), 2), 1) AS a_price_cat_fq_cae, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_euro, a.price_euro) AS price_sort, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_euro_it, a.price_euro_it) AS price_sort_it, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_euro_de, a.price_euro_de) AS price_sort_de, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_euro_fr, a.price_euro_fr) AS price_sort_fr, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_rub, a.price_rub) AS price_sort_rub, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_chf, a.price_chf) AS price_sort_chf, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_sek, a.price_sek) AS price_sort_sek, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_nok, a.price_euro) AS price_sort_nok, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_dkk, a.price_euro) AS price_sort_dkk, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_pln, a.price_euro) AS price_sort_pln, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_euro, a.price_euro) AS price_sort_hkd, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_gbp, a.price_gbp) AS price_sort_gbp, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_usd, a.price_usd) AS price_sort_usd, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_mq_cad, a.price_cad) AS price_sort_cad, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_fq_usd, a.price_usd) AS price_sort_fq_usd, \
            IF ((SELECT COUNT(a1.id) FROM article a1 WHERE a1.measure = 1 AND a.collection = a1.collection AND a1.file IS NOT NULL AND a1.file <> '' AND a1.type IN (113,24) AND a1.delivery <> 6) <> 0, a.price_fq_cad, a.price_cad) AS price_sort_fq_cad, \
            a.price_euro, \
            a.price_euro_de, \
            a.price_euro_fr, \
            a.price_euro_it, \
            a.price_mq_euro, \
            a.price_mq_euro_de, \
            a.price_mq_euro_fr, \
            a.price_mq_euro_it, \
            a.price_rub, \
            a.price_rue, \
            a.price_mq_rub, \
            a.price_mq_rue, \
            a.price_gbp, \
            a.price_gbe, \
            a.price_mq_gbp, \
            a.price_mq_gbe, \
            a.price_usd, \
            a.price_use, \
            a.price_fq_usd, \
            a.price_fq_use, \
            a.price_mq_usd, \
            a.price_mq_use, \
            a.price_chf, \
            a.price_che, \
            a.price_mq_chf, \
            a.price_mq_che, \
            a.price_sek, \
            a.price_see, \
            a.price_mq_sek, \
            a.price_mq_see, \
            a.price_dkk, \
            a.price_dke, \
            a.price_mq_dkk, \
            a.price_mq_dke, \
            a.price_nok, \
            a.price_noe, \
            a.price_mq_nok, \
            a.price_mq_noe, \
            a.price_pln, \
            a.price_ple, \
            a.price_mq_pln, \
            a.price_mq_ple, \
            a.price_cad, \
            a.price_cae, \
            a.price_mq_cad, \
            a.price_mq_cae, \
            a.price_fq_cad, \
            a.price_fq_cae, \
            a.style AS a_style, \
            a.scheme, \
            a.module, \
            a.file, \
            a.swimming_pool, \
            a.express_sample, \
            a.sliding AS sliding, \
            IF (a.file_size2_x = 0 OR a.file_size2_y = 0, a.file_size3_x, a.file_size2_x) AS fs_x, \
            IF (a.file_size2_x = 0 OR a.file_size2_y = 0, a.file_size3_y, a.file_size2_y) AS fs_y, \
            at.texture_id AS a_texture, \
            lmotiv.motiv_id AS a_motive, \
            (SELECT count(atex.texture_id) FROM article_texture AS atex WHERE atex.article_id = a.id AND atex.texture_id = 99 LIMIT 1) AS monochrome, \
            (SELECT count(itex.texture_id) FROM interior_texture AS itex WHERE itex.interior_id = f.id AND itex.texture_id = 99 LIMIT 1) AS i_monochrome, \
			c.id AS c_id, \
            c.code AS coll, \
            c.test_access AS c_test_access, \
            IF (c.alternate_name IS NOT NULL, c.alternate_name, c.name) AS c_name, \
            c.header AS c_header,\
            c.release_year AS c_release_year, \
            c.url AS c_url, \
            c.factory, \
            c.archive, \
            c.accessible AS c_accessible, \
            IF (c.archive = 1 OR c.status > 1, 1, 0) AS c_archive, \
            IF ((c.status = 1 OR c.archive = 1), 1, 0) AS with_archive, \
            IF (c.status = 1, 1, 0) AS status_site, \
            c.status AS c_status, \
            c.pr_min_euro AS pr_min_euro, \
            c.pr_min_euro_de AS pr_min_euro_de, \
            c.pr_min_euro_fr AS pr_min_euro_fr, \
            c.pr_min_euro_it AS pr_min_euro_it, \
            c.pr_min_rub AS pr_min_rub, \
            c.pr_min_rue AS pr_min_rue, \
            c.pr_min_gbp AS pr_min_gbp, \
            c.pr_min_gbe AS pr_min_gbe, \
            c.pr_min_usd AS pr_min_usd, \
            c.pr_min_use AS pr_min_use, \
            c.pr_min_usd AS pr_min_f_usd, \
            c.pr_min_use AS pr_min_f_use, \
            c.pr_min_chf AS pr_min_chf, \
            c.pr_min_che AS pr_min_che, \
            c.pr_min_sek AS pr_min_sek, \
            c.pr_min_see AS pr_min_see, \
            c.pr_min_dkk AS pr_min_dkk, \
            c.pr_min_dke AS pr_min_dke, \
            c.pr_min_nok AS pr_min_nok, \
            c.pr_min_noe AS pr_min_noe, \
            c.pr_min_pln AS pr_min_pln, \
            c.pr_min_ple AS pr_min_ple, \
            c.pr_min_cad AS pr_min_cad, \
            c.pr_min_cae AS pr_min_cae, \
			c.author, \
			c.rating AS rating, \
			c.awards AS c_awards, \
			c.exhibition AS c_exhibition, \
            IF ((SELECT count(a1.`id`) FROM `article` a1 WHERE a1.express_sample = 1 AND a1.delivery != 6 AND a1.file != '' AND a1.file IS NOT NULL  AND a1.collection = c.id) > 0, 1, 0) AS c_express_sample, \
			ia.apply_id AS c_apply, \
            UNIX_TIMESTAMP(c.publish_date) AS publish_date, \
            UNIX_TIMESTAMP(a.sale_date) AS sale_date, \
			ct.id AS country, \
			ct.code AS country_code, \
			d.id AS f_id, \
			d.user_id AS u_id, \
			d.alternate_name AS f_name, \
			d.url AS f_url, \
			d.test_access AS f_test_access, \
			e.color_id AS color, \
			ia.apply_id, \
			(SELECT GROUP_CONCAT(itxt.texture_id SEPARATOR ',') FROM  interior_texture AS itxt WHERE itxt.interior_id = f.id) AS i_texture, \
			ist.style_id AS styleid, \
			ast.style_id AS styleida, \
			f.id AS i_id, \
			IF (f.is_main = 1, 2, f.is_head) AS is_head, \
			IF (f.file_size_z_x = 0 OR f.file_size_z_y = 0, (f.file_size_x / (f.file_size_y / 300)), f.file_size_z_x) AS fsi_x, \
			IF (f.file_size_z_x = 0 OR f.file_size_z_y = 0, 300, f.file_size_z_y) AS fsi_y, \
			f.name AS i_name, \
			f.file AS i_file, \
			f.using_id AS i_type, \
			f.status AS i_status, \
			(SELECT count(*) FROM idea_interior AS ii WHERE ii.interior_id = f.id) AS i_rating, \
            @a_head AS a_head, \
			(SELECT CONCAT(im.id, '|', im.name, '|', im.file, '|', im.file_size_z_x, '|', im.file_size_z_y, '|', (SELECT count(*) FROM idea_interior AS ii WHERE ii.interior_id = im.id)) FROM interior AS im WHERE im.collection = c.id AND im.is_main = 1 LIMIT 1) AS is_main, \
			@prc_count AS prc_count, \
			@prc_vote AS prc_vote, \
			(@prc_vote/@prc_count + 0.01 * @prc_count) * 100 AS prc_middle, \
			(SELECT COUNT(ih.id) FROM interior_history ih INNER JOIN interior i ON i.id = ih.interior_id WHERE c.id = i.collection AND TO_DAYS(NOW()) - TO_DAYS(`date`) <= 30) AS rating_month, \
            lst.id AS sid, \
			v.sort AS sort, \
			IF (lst.id = ist.style_id, 1, 0) AS i_style, \
			IF (@i_waf > 0 OR @i_wafn = 0, 1, 0) AS i_wall_and_floor, \
            IF (c.site IS NULL OR c.site = 'te', 1, 0) AS c_site_te, \
            IF (c.site IS NULL OR c.site = 'tr', 1, 0) AS c_site_tr, \
            (SELECT count(c1_.`id`) FROM `interior_history` i0_ LEFT JOIN `interior` i_ ON i_.id = i0_.interior_id  LEFT JOIN `collection` c1_ ON i_.collection = c1_.id LEFT JOIN `factory` f2_ ON c1_.factory = f2_.id LEFT JOIN `interior` i3_ ON c1_.id = i3_.collection WHERE c1_.`status` = 1 AND c1_.factory <> '' AND f2_.`status` = 1 AND i3_.`is_main` = 1 AND i0_.`date` >= DATE_SUB(CURRENT_DATE, INTERVAL 7 DAY) AND i0_.`action` = 1 AND c1_.`id` = c.id) as c_pop7 ,\
            (SELECT count(c1_.`id`) FROM `interior_history` i0_ LEFT JOIN `interior` i_ ON i_.id = i0_.interior_id  LEFT JOIN `collection` c1_ ON i_.collection = c1_.id LEFT JOIN `factory` f2_ ON c1_.factory = f2_.id LEFT JOIN `interior` i3_ ON c1_.id = i3_.collection WHERE c1_.`status` = 1 AND c1_.factory <> '' AND f2_.`status` = 1 AND i3_.`is_main` = 1 AND i0_.`date` >= DATE_SUB(CURRENT_DATE, INTERVAL 30 DAY) AND i0_.`action` = 1 AND c1_.`id` = c.id) as c_pop30, \
		    IF ((((a.type != 113 AND d.id != 14 AND (a.type != 106 OR a.type != 24 OR a.type != 1) AND @no_fons > 0) OR (a.type != 113 AND a.type != 106 AND a.type != 24 AND a.type != 1 AND (@no_fons > 0 OR @no_decors > 0))) = false), 1, 0) AS type_filter, \
		    IF((a.delivery != 6 AND d.status IN (1, 3) AND (f.status = 1 OR f.status IS NULL) OR a.balance > 0 AND a.pr_status = 7), 1, IF (c.status > 1, 2, 0)) AS typeColl \
		FROM article a \
		INNER JOIN collection c ON c.id = a.collection \
		INNER JOIN factory d ON c.factory = d.id \
		INNER JOIN list_country ct ON d.country = ct.id \
		LEFT JOIN article_texture at ON a.id = at.article_id \
		LEFT JOIN article_surface asur ON a.id = asur.article_id \
		LEFT JOIN article_motiv lmotiv ON a.id = lmotiv.article_id \
		LEFT JOIN article_color e ON a.id = e.article_id \
		LEFT JOIN interior_article iart ON a.id = iart.article_id \
		LEFT JOIN interior f ON iart.interior_id = f.id AND c.id = f.collection AND ((SELECT COUNT(a2.id) FROM article a2 INNER JOIN interior_articles_head iah ON iah.article_id = a2.id WHERE f.id = iah.interior_id AND a2.delivery != 6) = 0 OR (SELECT COUNT(a2.id) FROM article a2 INNER JOIN interior_articles_head iah ON iah.article_id = a2.id WHERE a.id = a2.id AND a2.delivery != 6 AND f.id = iah.interior_id) > 0 OR c.id = 3245628) \
		LEFT JOIN interior_apply ia ON ia.interior_id = f.id \
		LEFT JOIN interior_style ist ON f.id = ist.interior_id \
		LEFT JOIN list_type v ON a.type = v.id \
		LEFT JOIN article_style ast ON a.id = ast.article_id \
		LEFT JOIN list_style lst ON lst.id = ast.style_id OR lst.id = ist.style_id \
		WHERE c.factory != '99' AND a.file IS NOT NULL AND a.file <> '' AND c.status IN (1, 2, 3) AND a.price_euro > 0

    sql_field_string   = factory
    sql_field_string   = c_name
    sql_field_string   = c_header
    sql_field_string   = c_url
    sql_field_string   = f_name
    sql_field_string   = f_url
    sql_field_string   = a_name
    sql_field_string   = coll
    sql_field_string   = file
    sql_field_string   = i_name
    sql_field_string   = i_file
    sql_field_string   = author
	sql_field_string   = is_main
    sql_field_string   = i_texture
    sql_field_string   = c_awards
    sql_field_string   = c_exhibition
	sql_field_string   = country_code

    sql_attr_uint      = c_test_access
    sql_attr_uint      = f_test_access
	sql_attr_uint      = i_rating
    sql_attr_uint      = typeColl
    sql_attr_uint      = c_accessible
    sql_attr_uint      = c_pop7
    sql_attr_uint      = c_pop30
    sql_attr_uint      = a_head
    sql_attr_uint      = prc_count
    sql_attr_uint      = prc_vote
    sql_attr_uint      = thin_granite
    sql_attr_uint      = glazed_granite
	sql_attr_uint      = monochrome
	sql_attr_uint      = i_monochrome
	sql_attr_uint      = a_id
	sql_attr_uint      = i_id
	sql_attr_uint      = i_status
	sql_attr_uint      = c_id
	sql_attr_uint      = c_release_year
	sql_attr_uint      = f_id
	sql_attr_uint      = u_id
	sql_attr_uint      = with_archive
    sql_attr_uint      = sid
    sql_attr_uint      = styleid
    sql_attr_uint      = styleida
	sql_attr_uint      = sliding
    sql_attr_uint      = a_texture
	sql_attr_uint      = a_motive
    sql_attr_uint      = archive
	sql_attr_uint	   = status_site
	sql_attr_uint      = country
	sql_attr_uint      = surface
	sql_attr_uint      = pr_status
	sql_attr_uint      = using
	sql_attr_uint      = material
	sql_attr_uint      = shape
	sql_attr_uint      = a_style
	sql_attr_uint      = measure
	sql_attr_uint      = type
	sql_attr_uint      = color
	sql_attr_uint      = fs_x
	sql_attr_uint      = fs_y
	sql_attr_uint      = fsi_x
	sql_attr_uint      = fsi_y
	sql_attr_uint      = rating
	sql_attr_uint      = rating_month
	sql_attr_uint      = sort
	sql_attr_uint      = is_head
	sql_attr_uint      = scheme
	sql_attr_uint      = apply_id
	sql_attr_uint      = c_apply
	sql_attr_uint      = type_filter
	sql_attr_uint      = edge_type
	sql_attr_uint      = delivery
	sql_attr_uint      = off_shade
	sql_attr_uint      = i_type
	sql_attr_uint      = i_style
    sql_attr_uint      = i_wall_and_floor
    sql_attr_uint      = c_site_te
    sql_attr_uint      = c_site_tr
	sql_attr_uint	   = size_big
	sql_attr_uint	   = swimming_pool
	sql_attr_uint	   = express_sample
	sql_attr_uint	   = c_express_sample
	sql_attr_uint      = c_status
	sql_attr_uint      = square
	sql_attr_uint      = module

    sql_attr_uint      = a_price_cat
    sql_attr_uint      = a_price_cat_de
    sql_attr_uint      = a_price_cat_fr
    sql_attr_uint      = a_price_cat_it
    sql_attr_uint      = a_price_cat_fq_usd
    sql_attr_uint      = a_price_cat_fq_use
    sql_attr_uint      = a_price_cat_usd
    sql_attr_uint      = a_price_cat_use
    sql_attr_uint      = a_price_cat_rub
    sql_attr_uint      = a_price_cat_rue
    sql_attr_uint      = a_price_cat_gbp
    sql_attr_uint      = a_price_cat_gbe
    sql_attr_uint      = a_price_cat_chf
    sql_attr_uint      = a_price_cat_che
    sql_attr_uint      = a_price_cat_sek
    sql_attr_uint      = a_price_cat_see
    sql_attr_uint      = a_price_cat_dkk
    sql_attr_uint      = a_price_cat_dke
    sql_attr_uint      = a_price_cat_nok
    sql_attr_uint      = a_price_cat_noe
    sql_attr_uint      = a_price_cat_pln
    sql_attr_uint      = a_price_cat_ple
    sql_attr_uint      = a_price_cat_cad
    sql_attr_uint      = a_price_cat_cae
    sql_attr_uint      = a_price_cat_fq_cad
    sql_attr_uint      = a_price_cat_fq_cae

    sql_attr_float     = price_sort
    sql_attr_float     = price_sort_it
    sql_attr_float     = price_sort_de
    sql_attr_float     = price_sort_fr
    sql_attr_float     = price_sort_rub
    sql_attr_float     = price_sort_chf
    sql_attr_float     = price_sort_sek
    sql_attr_float     = price_sort_nok
    sql_attr_float     = price_sort_dkk
    sql_attr_float     = price_sort_pln
    sql_attr_float     = price_sort_hkd
    sql_attr_float     = price_sort_gbp
    sql_attr_float     = price_sort_usd
    sql_attr_float     = price_sort_cad
    sql_attr_float     = price_sort_fq_usd
    sql_attr_float     = price_sort_fq_cad
	sql_attr_float     = pr_min_euro
	sql_attr_float     = pr_min_euro_de
	sql_attr_float     = pr_min_euro_fr
	sql_attr_float     = pr_min_euro_it
	sql_attr_float     = pr_min_rub
	sql_attr_float     = pr_min_rue
	sql_attr_float     = pr_min_gbp
	sql_attr_float     = pr_min_gbe
	sql_attr_float     = pr_min_usd
	sql_attr_float     = pr_min_use
	sql_attr_float     = pr_min_f_usd
	sql_attr_float     = pr_min_f_use
	sql_attr_float     = pr_min_chf
	sql_attr_float     = pr_min_che
	sql_attr_float     = pr_min_sek
	sql_attr_float     = pr_min_see
	sql_attr_float     = pr_min_dkk
	sql_attr_float     = pr_min_dke
	sql_attr_float     = pr_min_nok
	sql_attr_float     = pr_min_noe
	sql_attr_float     = pr_min_pln
	sql_attr_float     = pr_min_ple
	sql_attr_float     = pr_min_cad
	sql_attr_float     = pr_min_cae

	sql_attr_float     = price_euro
	sql_attr_float     = price_euro_de
	sql_attr_float     = price_euro_fr
	sql_attr_float     = price_euro_it
	sql_attr_float     = price_rub
	sql_attr_float     = price_rue
	sql_attr_float     = price_gbp
	sql_attr_float     = price_gbe
	sql_attr_float     = price_usd
	sql_attr_float     = price_use
	sql_attr_float     = price_chf
	sql_attr_float     = price_che
	sql_attr_float     = price_sek
	sql_attr_float     = price_see
	sql_attr_float     = price_dkk
	sql_attr_float     = price_dke
	sql_attr_float     = price_nok
	sql_attr_float     = price_noe
	sql_attr_float     = price_pln
	sql_attr_float     = price_ple
	sql_attr_float     = price_cad
	sql_attr_float     = price_cae

	sql_attr_float     = price_mq_euro
	sql_attr_float     = price_mq_euro_de
	sql_attr_float     = price_mq_euro_fr
	sql_attr_float     = price_mq_euro_it
	sql_attr_float     = price_mq_rub
	sql_attr_float     = price_mq_rue
	sql_attr_float     = price_mq_gbp
	sql_attr_float     = price_mq_gbe
	sql_attr_float     = price_fq_usd
	sql_attr_float     = price_fq_use
	sql_attr_float     = price_mq_usd
	sql_attr_float     = price_mq_use
	sql_attr_float     = price_mq_chf
	sql_attr_float     = price_mq_che
	sql_attr_float     = price_mq_sek
	sql_attr_float     = price_mq_see
	sql_attr_float     = price_mq_dkk
	sql_attr_float     = price_mq_dke
	sql_attr_float     = price_mq_nok
	sql_attr_float     = price_mq_noe
	sql_attr_float     = price_mq_pln
	sql_attr_float     = price_mq_ple
	sql_attr_float     = price_mq_cad
	sql_attr_float     = price_mq_cae
	sql_attr_float     = price_fq_cad
	sql_attr_float     = price_fq_cae

	sql_attr_float     = balance
	sql_attr_float     = balance_te
	sql_attr_float     = size_x
	sql_attr_float     = size_y
	sql_attr_float     = thick
    sql_attr_float     = weight
    sql_attr_float     = packaging_count
    sql_attr_float     = packaging_count_ft
	sql_attr_float     = prc_middle

	sql_attr_timestamp = publish_date
	sql_attr_timestamp = sale_date
}

source collections : te {
	sql_query = \
        SELECT \
            @id := @id + 1, \
            c.id AS c_id, \
            c.publish_date, \
            c.code, \
            c.rating \
        FROM collection AS c \

    sql_attr_uint      = c_id
    sql_field_string   = code
    sql_attr_timestamp = publish_date
    sql_attr_uint      = rating
}

source search : te {
    sql_query = \
        SELECT \
            @id := @id + 1, \
            c.id AS c_id, \
            c.name AS c_name, \
            c.accessible AS c_accessible, \
            c.url AS c_url, \
            c.alternate_name AS c_alternate_name, \
            c.author, \
            c.status AS c_status, \
            c_html.ru AS description_ru, \
            c_html.en AS description_en, \
            c_html.it AS description_it, \
            c_html.es AS description_es, \
            c_html.fr AS description_fr, \
            c_html.de AS description_de, \
            c_html.pl AS description_pl, \
            c_html.nl AS description_nl, \
            c_html.fi AS description_fi, \
            c_html.sv AS description_sv, \
            c_html.da AS description_da, \
            c_html.no AS description_no, \
            c_html.pt AS description_pt, \
            f.name AS f_name, \
            f.type AS f_type, \
            f.name_inv AS f_name_inv, \
            f.accessible AS f_accessible, \
            f.url AS f_url, \
            ct.alias AS ct_alias, \
            ct.code AS ct_code, \
            f.alternate_name AS f_alternate_name, \
            fp.html_ru AS f_description_ru, \
            fp.html_en AS f_description_en, \
            fp.html_it AS f_description_it, \
            fp.html_es AS f_description_es, \
            fp.html_fr AS f_description_fr, \
            fp.html_de AS f_description_de, \
            fp.html_pl AS f_description_pl, \
            fp.html_nl AS f_description_nl, \
            fp.html_fi AS f_description_fi, \
            fp.html_sv AS f_description_sv, \
            fp.html_da AS f_description_da, \
            fp.html_no AS f_description_no, \
            fp.html_pt AS f_description_pt \
        FROM collection c \
        LEFT JOIN locale_html c_html ON c_html.collection_body_id = c.id \
        INNER JOIN factory f ON c.factory = f.id \
        INNER JOIN list_country ct ON f.country = ct.id \
        LEFT JOIN filters fe ON fe.brand = f.id \
        LEFT JOIN filter_pages fp ON fe.page_id = fp.id \
        WHERE c.factory != '99' AND f.status IN (1,3) AND (f.test_access IS NULL OR f.test_access = 0) \
        AND (c.test_access IS NULL OR c.test_access = 0) AND c.status IN (1,3)

    sql_attr_uint    = c_id
    sql_attr_uint    = c_accessible
    sql_attr_uint    = f_accessible
    sql_attr_uint    = f_type
    sql_attr_uint    = c_status

    sql_field_string = c_url
    sql_field_string = c_name
    sql_field_string = c_alternate_name
    sql_field_string = author
    sql_field_string = f_url
    sql_field_string = f_name
    sql_field_string = f_name_inv
    sql_field_string = f_alternate_name
    sql_field_string = description_ru
    sql_field_string = description_en
    sql_field_string = description_it
    sql_field_string = description_es
    sql_field_string = description_fr
    sql_field_string = description_de
    sql_field_string = description_pl
    sql_field_string = description_nl
    sql_field_string = description_fi
    sql_field_string = description_sv
    sql_field_string = description_da
    sql_field_string = description_no
    sql_field_string = description_pt
    sql_field_string = f_description_ru
    sql_field_string = f_description_en
    sql_field_string = f_description_it
    sql_field_string = f_description_es
    sql_field_string = f_description_fr
    sql_field_string = f_description_de
    sql_field_string = f_description_pl
    sql_field_string = f_description_nl
    sql_field_string = f_description_fi
    sql_field_string = f_description_sv
    sql_field_string = f_description_da
    sql_field_string = f_description_no
    sql_field_string = f_description_pt
    sql_field_string = ct_code
    sql_field_string = ct_alias
}

source publication : te {
    sql_query = \
        SELECT \
            @id := @id + 1, \
            p.id AS p_id, \
            preview.def AS img, \
            url.ru AS url_ru, \
            url.en AS url_en, \
            url.it AS url_it, \
            url.es AS url_es, \
            url.fr AS url_fr, \
            url.de AS url_de, \
            url.pl AS url_pl, \
            url.nl AS url_nl, \
            url.fi AS url_fi, \
            url.sv AS url_sv, \
            url.da AS url_da, \
            url.no AS url_no, \
            url.pt AS url_pt, \
            title.ru AS title_ru, \
            title.en AS title_en, \
            title.it AS title_it, \
            title.es AS title_es, \
            title.fr AS title_fr, \
            title.de AS title_de, \
            title.pl AS title_pl, \
            title.nl AS title_nl, \
            title.fi AS title_fi, \
            title.sv AS title_sv, \
            title.da AS title_da, \
            title.no AS title_no, \
            title.pt AS title_pt, \
            html.ru AS html_ru, \
            html.en AS html_en, \
            html.it AS html_it, \
            html.es AS html_es, \
            html.fr AS html_fr, \
            html.de AS html_de, \
            html.pl AS html_pl, \
            html.nl AS html_nl, \
            html.fi AS html_fi, \
            html.sv AS html_sv, \
            html.da AS html_da, \
            html.no AS html_no, \
            html.pt AS html_pt, \
            lb.ru AS lb_ru, \
            lb.en AS lb_en, \
            lb.it AS lb_it, \
            lb.es AS lb_es, \
            lb.fr AS lb_fr, \
            lb.de AS lb_de, \
            lb.pl AS lb_pl, \
            lb.nl AS lb_nl, \
            lb.fi AS lb_fi, \
            lb.sv AS lb_sv, \
            lb.da AS lb_da, \
            lb.no AS lb_no, \
            lb.pt AS lb_pt \
        FROM publication p \
        INNER JOIN locale_bool lb ON lb.blog_show_id = p.id \
        INNER JOIN locale_url url ON url.publication_id = p.id \
        INNER JOIN locale_title title ON title.publication_id = p.id \
        INNER JOIN locale_html html ON html.publication_body_id = p.id \
        INNER JOIN locale_preview preview ON preview.publication_id = p.id \
        WHERE p.enable = true

    sql_attr_uint    = p_id

    sql_field_string = img
    sql_field_string = url_ru
    sql_field_string = url_en
    sql_field_string = url_it
    sql_field_string = url_es
    sql_field_string = url_fr
    sql_field_string = url_de
    sql_field_string = url_pl
    sql_field_string = url_nl
    sql_field_string = url_fi
    sql_field_string = url_sv
    sql_field_string = url_da
    sql_field_string = url_no
    sql_field_string = url_pt
    sql_field_string = title_ru
    sql_field_string = title_en
    sql_field_string = title_it
    sql_field_string = title_es
    sql_field_string = title_fr
    sql_field_string = title_de
    sql_field_string = title_pl
    sql_field_string = title_nl
    sql_field_string = title_fi
    sql_field_string = title_sv
    sql_field_string = title_da
    sql_field_string = title_no
    sql_field_string = title_pt
    sql_field_string = html_ru
    sql_field_string = html_en
    sql_field_string = html_it
    sql_field_string = html_es
    sql_field_string = html_fr
    sql_field_string = html_de
    sql_field_string = html_pl
    sql_field_string = html_nl
    sql_field_string = html_fi
    sql_field_string = html_sv
    sql_field_string = html_da
    sql_field_string = html_no
    sql_field_string = html_pt
    sql_attr_uint = lb_ru
    sql_attr_uint = lb_en
    sql_attr_uint = lb_it
    sql_attr_uint = lb_es
    sql_attr_uint = lb_fr
    sql_attr_uint = lb_de
    sql_attr_uint = lb_pl
    sql_attr_uint = lb_nl
    sql_attr_uint = lb_fi
    sql_attr_uint = lb_sv
    sql_attr_uint = lb_da
    sql_attr_uint = lb_no
    sql_attr_uint = lb_pt
}

source filters : te {
    sql_query = \
        SELECT \
            @id := @id + 1, \
            fl.id AS fl_id, \
            fl.icon AS fl_icon, \
            lu.ru AS url_ru, \
            lu.en AS url_en, \
            lu.it AS url_it, \
            lu.es AS url_es, \
            lu.fr AS url_fr, \
            lu.de AS url_de, \
            lu.pl AS url_pl, \
            lu.nl AS url_nl, \
            lu.fi AS url_fi, \
            lu.sv AS url_sv, \
            lu.da AS url_da, \
            lu.no AS url_no, \
            lu.pt AS url_pt, \
            fp.name_single_ru AS name_ru, \
            fp.name_single_en AS name_en, \
            fp.name_single_it AS name_it, \
            fp.name_single_es AS name_es, \
            fp.name_single_fr AS name_fr, \
            fp.name_single_de AS name_de, \
            fp.name_single_pl AS name_pl, \
            fp.name_single_nl AS name_nl, \
            fp.name_single_fi AS name_fi, \
            fp.name_single_sv AS name_sv, \
            fp.name_single_da AS name_da, \
            fp.name_single_no AS name_no, \
            fp.name_single_pt AS name_pt, \
            fp.html_ru AS html_ru, \
            fp.html_en AS html_en, \
            fp.html_it AS html_it, \
            fp.html_es AS html_es, \
            fp.html_fr AS html_fr, \
            fp.html_de AS html_de, \
            fp.html_pl AS html_pl, \
            fp.html_nl AS html_nl, \
            fp.html_fi AS html_fi, \
            fp.html_sv AS html_sv, \
            fp.html_da AS html_da, \
            fp.html_no AS html_no, \
            fp.html_pt AS html_pt \
        FROM filters fl \
        INNER JOIN locale_url lu ON fl.id = lu.filter_id \
        INNER JOIN filter_pages fp ON fl.page_id = fp.id \
        INNER JOIN filter_params fpr ON fl.param_id = fpr.id AND fpr.is_enable = 1 \
        WHERE fpr.hide != 1 AND fl.group_id != 406

    sql_attr_uint    = fl_id

    sql_field_string = fl_icon
    sql_field_string = url_ru
    sql_field_string = url_en
    sql_field_string = url_it
    sql_field_string = url_es
    sql_field_string = url_fr
    sql_field_string = url_de
    sql_field_string = url_pl
    sql_field_string = url_nl
    sql_field_string = url_fi
    sql_field_string = url_sv
    sql_field_string = url_da
    sql_field_string = url_no
    sql_field_string = url_pt
    sql_field_string = name_ru
    sql_field_string = name_en
    sql_field_string = name_it
    sql_field_string = name_es
    sql_field_string = name_fr
    sql_field_string = name_de
    sql_field_string = name_pl
    sql_field_string = name_nl
    sql_field_string = name_fi
    sql_field_string = name_sv
    sql_field_string = name_da
    sql_field_string = name_no
    sql_field_string = name_pt
    sql_field_string = html_ru
    sql_field_string = html_en
    sql_field_string = html_it
    sql_field_string = html_es
    sql_field_string = html_fr
    sql_field_string = html_de
    sql_field_string = html_pl
    sql_field_string = html_nl
    sql_field_string = html_fi
    sql_field_string = html_sv
    sql_field_string = html_da
    sql_field_string = html_no
    sql_field_string = html_pt
}
#########################################
# INDEXER
#########################################
index article {
	source			  = article
	path			  = /opt/sphinx/index/article
	mlock			  = 0
	morphology        = stem_enru
    min_word_len      = 2
	charset_table     = 0..9, A..Z->a..z, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451, U+27->U+2019,U+00C0->a,U+00C1->a,U+00C2->a,U+00C3->a,\
    U+00C4->a,U+00C5->a,U+00C6->a,U+00E0->a,U+00E1->a,U+00E2->a,U+00E3->a,U+00E4->a,U+00E5->a,U+00E6->a,U+0104->a,U+0105->a,U+00C7->c,U+00E7->c,U+0106->c,U+0107->c,U+0108->c,\
    U+0109->c,U+010A->c,U+010B->c,U+010C->c,U+010D->c,U+00C8->e,U+00C9->e,U+00CA->e,U+00CB->e,U+00E8->e,U+00E9->e,U+00EA->e,U+00EB->e,U+00CC->i,U+00CD->i,U+00CE->i,U+00CF->i,U+00EC->i,\
    U+00ED->i,U+00EE->i,U+00EF->i,U+00D1->n,U+00F1->n,U+00D2->o,U+00D3->o,U+00D4->o,U+00D5->o,U+00D6->o,U+00F2->o,U+00F3->o,U+00F4->o,U+00F5->o,U+00F6->o,U+015E->s,U+015F->s,U+00D9->u,\
    U+00DA->u,U+00DB->u,U+00DC->u,U+00F9->u,U+00FA->u,U+00FB->u,U+00FC->u,U+00DD->y
    ignore_chars      = U+0040, U+002F, U+002A, U+002E, U+0028, U+0029, U+0026, U+0025, U+0024, U+002C, U+0021, U+005E
	blend_chars       = U+0023, U+002B
    html_strip        = 1
}

index collections {
	source			  = collections
	path			  = /opt/sphinx/index/collections
	mlock			  = 0
	morphology        = stem_enru
    min_word_len      = 2
	charset_table     = 0..9, A..Z->a..z, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451, U+27->U+2019,U+00C0->a,U+00C1->a,U+00C2->a,U+00C3->a,\
    U+00C4->a,U+00C5->a,U+00C6->a,U+00E0->a,U+00E1->a,U+00E2->a,U+00E3->a,U+00E4->a,U+00E5->a,U+00E6->a,U+0104->a,U+0105->a,U+00C7->c,U+00E7->c,U+0106->c,U+0107->c,U+0108->c,\
    U+0109->c,U+010A->c,U+010B->c,U+010C->c,U+010D->c,U+00C8->e,U+00C9->e,U+00CA->e,U+00CB->e,U+00E8->e,U+00E9->e,U+00EA->e,U+00EB->e,U+00CC->i,U+00CD->i,U+00CE->i,U+00CF->i,U+00EC->i,\
    U+00ED->i,U+00EE->i,U+00EF->i,U+00D1->n,U+00F1->n,U+00D2->o,U+00D3->o,U+00D4->o,U+00D5->o,U+00D6->o,U+00F2->o,U+00F3->o,U+00F4->o,U+00F5->o,U+00F6->o,U+015E->s,U+015F->s,U+00D9->u,\
    U+00DA->u,U+00DB->u,U+00DC->u,U+00F9->u,U+00FA->u,U+00FB->u,U+00FC->u,U+00DD->y
    ignore_chars      = U+0040, U+002F, U+002A, U+002E, U+0028, U+0029, U+0026, U+0025, U+0024, U+002C, U+0021, U+005E
	blend_chars       = U+0023, U+002B
    html_strip        = 1
}

index search {
	source		      = search
	path		      = /opt/sphinx/index/search
    html_strip        = 1
	morphology        = stem_enru
	charset_table     = 0..9, A..Z->a..z,U+2019, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451, U+27->U+2019,U+00C0->a,U+00C1->a,U+00C2->a,U+00C3->a,\
	U+00C4->a,U+00C5->a,U+00C6->a,U+00E0->a,U+00E1->a,U+00E2->a,U+00E3->a,U+00E4->a,U+00E5->a,U+00E6->a,U+0104->a,U+0105->a,U+00C7->c,U+00E7->c,U+0106->c,U+0107->c,U+0108->c,\
	U+0109->c,U+010A->c,U+010B->c,U+010C->c,U+010D->c,U+00C8->e,U+00C9->e,U+00CA->e,U+00CB->e,U+00E8->e,U+00E9->e,U+00EA->e,U+00EB->e,U+00CC->i,U+00CD->i,U+00CE->i,U+00CF->i,U+00EC->i,\
	U+00ED->i,U+00EE->i,U+00EF->i,U+00D1->n,U+00F1->n,U+00D2->o,U+00D3->o,U+00D4->o,U+00D5->o,U+00D6->o,U+00F2->o,U+00F3->o,U+00F4->o,U+00F5->o,U+00F6->o,U+015E->s,U+015F->s,U+00D9->u,\
	U+00DA->u,U+00DB->u,U+00DC->u,U+00F9->u,U+00FA->u,U+00FB->u,U+00FC->u,U+00DD->y
	blend_chars       = U+0023, U+002B
    ignore_chars      = U+0040, U+002F, U+002A, U+002E, U+0028, U+0029, U+0026, U+0025, U+0024, U+002C, U+0021, U+005E

    index_exact_words = 1
    expand_keywords	  = 1
    min_word_len	  = 2
    min_infix_len     = 2
}

index publication {
	source		      = publication
	path		      = /opt/sphinx/index/publication
    html_strip        = 1
	morphology        = stem_enru
	charset_table     = 0..9, A..Z->a..z,U+2019, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451, U+27->U+2019,U+00C0->a,U+00C1->a,U+00C2->a,U+00C3->a,\
    U+00C4->a,U+00C5->a,U+00C6->a,U+00E0->a,U+00E1->a,U+00E2->a,U+00E3->a,U+00E4->a,U+00E5->a,U+00E6->a,U+0104->a,U+0105->a,U+00C7->c,U+00E7->c,U+0106->c,U+0107->c,U+0108->c,\
    U+0109->c,U+010A->c,U+010B->c,U+010C->c,U+010D->c,U+00C8->e,U+00C9->e,U+00CA->e,U+00CB->e,U+00E8->e,U+00E9->e,U+00EA->e,U+00EB->e,U+00CC->i,U+00CD->i,U+00CE->i,U+00CF->i,U+00EC->i,\
    U+00ED->i,U+00EE->i,U+00EF->i,U+00D1->n,U+00F1->n,U+00D2->o,U+00D3->o,U+00D4->o,U+00D5->o,U+00D6->o,U+00F2->o,U+00F3->o,U+00F4->o,U+00F5->o,U+00F6->o,U+015E->s,U+015F->s,U+00D9->u,\
    U+00DA->u,U+00DB->u,U+00DC->u,U+00F9->u,U+00FA->u,U+00FB->u,U+00FC->u,U+00DD->y
	blend_chars       = U+0023, U+002B
    ignore_chars      = U+0040, U+002F, U+002A, U+002E, U+0028, U+0029, U+0026, U+0025, U+0024, U+002C, U+0021, U+005E

    index_exact_words = 1
    expand_keywords	  = 1
    min_word_len	  = 2
    min_infix_len     = 2
}

index filters {
	source		      = filters
	path		      = /opt/sphinx/index/filters
    html_strip        = 1
	morphology        = stem_enru
	charset_table     = 0..9, A..Z->a..z,U+2019, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451, U+27->U+2019,U+00C0->a,U+00C1->a,U+00C2->a,U+00C3->a,\
    U+00C4->a,U+00C5->a,U+00C6->a,U+00E0->a,U+00E1->a,U+00E2->a,U+00E3->a,U+00E4->a,U+00E5->a,U+00E6->a,U+0104->a,U+0105->a,U+00C7->c,U+00E7->c,U+0106->c,U+0107->c,U+0108->c,\
    U+0109->c,U+010A->c,U+010B->c,U+010C->c,U+010D->c,U+00C8->e,U+00C9->e,U+00CA->e,U+00CB->e,U+00E8->e,U+00E9->e,U+00EA->e,U+00EB->e,U+00CC->i,U+00CD->i,U+00CE->i,U+00CF->i,U+00EC->i,\
    U+00ED->i,U+00EE->i,U+00EF->i,U+00D1->n,U+00F1->n,U+00D2->o,U+00D3->o,U+00D4->o,U+00D5->o,U+00D6->o,U+00F2->o,U+00F3->o,U+00F4->o,U+00F5->o,U+00F6->o,U+015E->s,U+015F->s,U+00D9->u,\
    U+00DA->u,U+00DB->u,U+00DC->u,U+00F9->u,U+00FA->u,U+00FB->u,U+00FC->u,U+00DD->y,
	blend_chars       = U+0023, U+002B
    ignore_chars      = U+0040, U+002F, U+002A, U+002E, U+0028, U+0029, U+0026, U+0025, U+0024, U+002C, U+0021, U+005E

    index_exact_words = 1
    expand_keywords	  = 1
    min_word_len	  = 2
    min_infix_len     = 2
}
#############################################################################
# index definition
#############################################################################
indexer {
	mem_limit  = 1024M
	max_iops   = 0
	max_iosize = 0
}

#############################################################################
# searchd settings
#############################################################################

searchd {
	listen = 127.0.0.1:36307:mysql41
	listen = sphinx:36307:mysql41

	read_timeout     = 1
	max_children     = 50
	seamless_rotate  = 1
	preopen_indexes  = 1
	unlink_old       = 1

	pid_file = /opt/sphinx/searchd.pid

	log = /opt/sphinx/log/searchd.log
	query_log = /opt/sphinx/log/query.log
#	binlog_path = /opt/sphinx/binlog
}
